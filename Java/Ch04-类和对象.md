# 类和对象

## 4.1 面向对象编程
- **核心特性**：
  - 封装（Encapsulation）
  - 继承（Inheritance）
  - 多态（Polymorphism）

## 4.2 类声明和类体
```java
class 类名 {
    // 类体
}
```
- **命名规范**：
  - 类的名字不能是Java中的关键字
  - 名字可以由字母、下划线、数字和美元符号组成，并且第一个字符不能是数字
  - 拉丁字母首字母大写（如`Vehicle`）
  - 复合单词每个单词首字母大写（如`ElectricCar`）

## 4.3 类体的构成
### 成员变量
```java
class Vehicle {
    int speed;          // 实例变量
    static int count;   // 类变量
}

class A {
    int a;
    float b;

    a = 12;       // 非法：执行语句不能直接在类体中
    b = 12.56f;   // 非法：需放在方法内

    void f() {}
}
```
- **说明**：
  - 刻画对象的属性/状态
  - 类内全局有效，与定义顺序无关
  - 支持任意Java数据类型（含对象、接口）
  - 可直接赋初值，操作仅能在方法中进行

### 方法
```java
void changeSpeed(int newSpeed) {
    speed = newSpeed;
}
```
- **说明**：
  - 构造方法：对象创建时初始化状态
  - 普通方法：供对象调用，操作成员变量或实现功能

## 4.4 构造方法与对象创建
### 构造方法特点
1. 与类同名
2. 无返回类型（连void都不写）
3. 可重载（参数不同）
4. 自定义构造方法后，Java不提供默认构造方法

### 对象创建
1. 声明对象：`Car myCar;`
2. 实例化：`myCar = new Car();`

### 对象使用
1. 对象能力：可操作自身变量（改状态）、调用所属类的方法（产生行为）
2. 访问方式：通过“.“运算符访问变量、调用方法
3. 调用方法：`ladderOne.setAbove(16);`

## 4.5 对象的引用与实体
- **关键概念**：
  - 引用变量存储对象地址：对象本身存储引用，通过引用操作实体；引用相同则实体相同
  - `null`表示空引用：无实体的对象为空对象，不可调用方法（否则抛NullPointerException），编译器不检查，需手动避免
  - 垃圾回收机制自动管理内存：运行环境自动回收”无任何对象引用“的实体，释放内存

## 4.6 成员变量
| 类型   | 修饰符    | 访问方式    | 生命周期   |
| ---- | ------ | ------- | ------ |
| 实例变量 | 无      | 对象访问    | 随对象存在  |
| 类变量  | static | 类名/对象访问 | 程序运行期间 |
> 注：使用类名访问静态变量是一个好的编程习惯

```Java
class Tom {
    final int MAX = 100;
    final static int MIN = 20;
}

public class Example {
    public static void main(String[] args) {
        System.out.println(Tom.MIN);
        // System.out.println(Tom.MAX); //Error
        Tom tom = new Tom();
        System.out.println(tom.MAX);
    }
}
```
- **常量**
  - final修饰成员变量
  - 命名习惯用大写字母
  - 声明时必须初始化（常量池存储）
  - 可以通过对象访问，不能通过类名访问
> 注：在实际开发中，常量通常是不同对象间共享的静态变量，因此会同时用final和static来修饰（此时，则建议用类名来访问）

## 4.7 方法
### 方法类型
| 类型        | 修饰符    | 特点                   | 访问方式          |
| --------- | ------ | -------------------- | ------------- |
| 实例方法      | 无      | 可调用实例/静态方法、操作实例/静态变量 | 仅通过对象访问       |
| 静态方法（类方法） | static | 仅可调用静态方法、操作静态变量      | 推荐类名访问，也可对象访问 |
| 构造方法      | 无      | 与类名相同，用于对象初始化        | 配合`new`关键字调用  |
- **定义规则**
  - 结构组成：分为方法声明（含方法名、返回类型等）和方法体（变量定义+合法语句）
  - 命名规范：符合标识符规则，首字母小写，多单词从第2个单词起首字母大写（如`getTriangleArea()`）
  - 特殊要求：类中方法必须有方法体；`void`类型方法可无语句。

### 参数传递
```java
// 基本类型传值
void modify(int x) { x = 100; } 

// 引用类型传引用
void modifyCar(Car c) { c.color = "red"; }
```

| 参数类型           | 传递内容        | 方法内修改影响                        |
| -------------- | ----------- | ------------------------------ |
| 基本数据类型         | 变量的具体数值     | 仅修改拷贝值，不影响原变量                  |
| 引用类型（对象/数组/接口） | 变量的引用（内存地址） | 不改变原引用，但修改引用指向的实体时，原变量的实体会同步变化 |

## 4.8 方法重载
- **规则**：
  - 方法名相同
  - 参数列表不同（类型/数量）
  - 与返回类型无关

## 4.9 关键字this
### 使用限制
1. 可以出现在实例方法和构造方法中
2. 不可以出现在静态方法中（因静态方法可通过类名调用，可能无对象创建）

### 使用场景
1. 区分成员变量与局部变量
```java
void setSpeed(int speed) {
    this.speed = speed;
}
```
2. 调用其他构造方法
```java
// 代表当前构造方法创建的对象，可调用实例方法
Car() { this(0); }
// 代表当前调用方法的对象，可访问成员变量/调用其他实例方法
Car(int speed) { this.speed = speed; }
```
- **注意**：
  - 无命名冲突时，实例方法/构造方法中访问成员变量，调用实例方法可省略`this.`
  - 命名冲突（局部变量与成员变量同名）时，`this.`不可省略，否则访问的是局部变量

## 4.10 包
```java
package com.example.vehicles;
```
- **作用**：
  - 避免命名冲突
  - 提供访问控制
  - 便于分类管理
- **注意**：
  - package语句作为Java源文件中的第一条语句
  - 源程序省略package语句时，文件中定义的类默认归属无名包
> 注：不使用无名包是一个好的编程习惯

## 4.11 import语句
```java
import java.util.ArrayList;  // 单类导入
import java.util.*;          // 通配符导入
```
- **说明**：
  - Java查找类的优先级：先搜索程序所在目录，再搜索import语句指定的包
  - Java运行平台由类库（如rt.jar）和虚拟机组成，程序运行时仅加载实际使用的字节码
  - 常用类库包：java.lang（基础类）、java.io（输入输出）、java.net（网络编程）、java.util（工具类/集合/日期等）
> 导入整个包仅增加编译时间，不影响运行性能

## 4.12 访问权限
| 修饰符       | 类内  | 同包  | 子类  | 任意  |
| --------- | --- | --- | --- | --- |
| private   | ✅   | ❌   | ❌   | ❌   |
| default   | ✅   | ✅   | ❌   | ❌   |
| protected | ✅   | ✅   | ✅   | ❌   |
| public    | ✅   | ✅   | ✅   | ✅   |
- **说明**：
  - 不能用protected、private、static修饰外部类，只能修饰内部类
  - private、public、protected修饰符的意义也同样适用于构造方法，构造方法是private意味着不允许用户创建对象（如`Math`类）

## 4.13 对象的组合
```java
class Engine { /*...*/ }
class Car {
    Engine engine;  // 组合关系
}
```

## 4.14 基本类型包装类
```Java
public class Example {
    public static void main(String[] args) {
        char a[] = { 'a', 'b', 'c', 'D', 'E', 'F' };
        for (int i = 0; i < a.length; i++) {
            if (Character.isLowerCase(a[i]))
                a[i] = Character.toUpperCase(a[i]);
            else if (Character.isUpperCase(a[i]))
                a[i] = Character.toLowerCase(a[i]);
        }
        for (int i = 0; i < a.length; i++) {
            System.out.println("%6c", a[i]);
        }
    }
}
```

| 基本类型                | 包装类                     | 核心作用                     |
| ------------------- | ----------------------- | ------------------------ |
| char                | Character               | 提供字符相关的静态工具方法（大小写判断、转换等） |
| int/byte/short/long | Integer/Byte/Short/Long | 整数相关操作（字符串转int、进制转换等）    |
| float/double        | Float/Double<br>        | 对应基本类型的封装与工具方法           |

## 4.15 对象数组
```java
Student[] students = new Student[3];
students[0] = new Student("Alice");
```

## 4.16 反编译与文档生成
```bash
javap -c MyClass       # 反编译
javadoc MyClass.java   # 生成文档

javap java.awt.Button
javap -private java.wat.Button
```

## 4.17 JAR文件
```bash
jar cvf mylib.jar com/  # 创建JAR
java -jar app.jar       # 运行JAR
```
- **说明**：
  - 本质是基于ZIP格式的压缩文件（后缀.jar），专门用于打包Java相关资源。
  - 核心作用：
    1. 整合零散资源（.class文件、配置、图片等），简化分发与传输
    2. 压缩体积，提高JVM加载效率
    3. 支持可运行特性（声明主类后可通过java -jar启动）
    4. 作为第三方库（如Gson，Spring）的复用载体
  - 使用场景：
    1. 分发可运行Java程序（桌面应用、Spring Boot）
    2. 引入第三方依赖库
    3. 组件化开发（模块打包供多项目引用）
